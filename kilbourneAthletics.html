<!DOCTYPE html>
<html lang="en">
<head> 
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Worthington Kilbourne Sports</title>
    <link rel="stylesheet" href="kilbourne.css">
    <link rel="shortcut icon" type="image/x-icon" href="wolves.png">
</head>
<body>
  <!-- Header -->
    <header>
        <a href="index.html">
        <img src="wolves.png" alt="Worthington Kilbourne High School Logo" class="wolves"></a>
        <h1>Worthington Kilbourne High School</h1>
    </header>

    <div class="progress"></div> <!-- Progress Bar at the top-->
    <!-- Seasonal Buttons -->
     <div class="buttons">
  <button class="b1" id="b1">Autumn</button>
  <button class="b1" id="b2">Winter</button>
  <button class="b1" id="b3">Spring</button>
</div>

<!-- MAIN BLOCKS FOR SPORTS AND CLUBS IMAGES -->
         <div class="content">
<!-- Each separate cluster of code is a separate sport block on the site -->
  <div class="sport-container">
    <div id="sport1" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link1" class="link">Go to Page</button>
  </div>
<!-- End of Box 1 -->
  <div class="sport-container">
    <div id="sport2" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link2" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport3" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link3" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport4" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link4" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport5" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link5" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport6" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link6" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport7" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link7" class="link">Go to Page</button>
  </div>

  <div class="sport-container">
    <div id="sport8" class="example hidden">
      <h2>‎ </h2>
    </div>
    <p>‎ </p>
    <button id="link8" class="link">Go to Page</button>
  </div>

  <div id="hidden" class="content">
    <div class="sport-container">
      <div id="sport9" class="example hidden">
        <h2>‎ </h2>
      </div>
      <p>‎ </p>
      <button id="link9" class="link">Go to Page</button>
    </div>

    <div class="sport-container">
      <div id="sport10" class="example hidden">
        <h2>‎ </h2>
      </div>
      <p>‎ </p>
      <button id="link10" class="link">Go to Page</button>
    </div>

    <div class="sport-container">
      <div id="sport11" class="example hidden">
        <h2>‎ </h2>
      </div>
      <p>‎ </p>
      <button id="link11" class="link">Go to Page</button>
    </div>

    <div class="sport-container">
      <div id="sport12" class="example hidden">
        <h2>‎ </h2>
      </div>
      <p>‎ </p>
      <button id="link12" class="link">Go to Page</button>
    </div>

    <div class="sport-container">
      <div id="sport13" class="example hidden">
        <h2>‎ </h2>
      </div>
      <p>‎ </p>
      <button id="link13" class="link">Go to Page</button>
    </div>

  </div>
</div>

<!--This is a footer with all the links for socials and important information-->
    <footer class="custom-footer">
    <div class="footer-content">
        <div class="footer-logo">
            <a href="https://www.worthington.k12.oh.us/worthingtonkilbournehs">
                <img src="wolves.png" alt="WKHS Logo" width="60">
            </a>
        </div>
        <div class="footer-info">
            <div>1499 Hard Rd, Columbus, OH 43235</div>
            <div>Phone: <a href="tel:614.450.6400">614.450.6400</a></div>
            <div>Email: <a href="mailto:athomas@wscloud.org">athomas@wscloud.org</a></div>
        </div>
        <div class="footer-links">
            <a href="https://www.facebook.com/WorthingtonSchools/">Facebook</a>
            <a href="https://www.instagram.com/worthingtonschools/">Instagram</a>
            <a href="https://www.linkedin.com/company/worthington-schools">LinkedIn</a>
            <a href="https://x.com/WKHSWolves">Twitter</a>
            <a href="https://www.youtube.com/@WorthingtonSchools">YouTube</a>
        </div>
        <div class="footer-popular-links">
            <a href="https://www.worthington.k12.oh.us/portal-login">Portal Login</a>
            <a href="https://www.worthington.k12.oh.us/our-district/worthington-school-calendars">Calendars</a>
            <a href="http://www.worthingtonschoolmenus.com/">Food Services</a>
            <a href="https://mystop.worthington-portal.org/elinkrp/">Transportation</a>
            <a href="https://www.worthington.k12.oh.us/staff-directorys">Staff Directory</a>
            <a href="https://www.worthington.k12.oh.us/e-newsletter">E-Newsletter</a>
            <a href="https://www.worthington.k12.oh.us/employment">Employment</a>
            <a href="https://www.worthington.k12.oh.us/buy-ticketss">Buy Tickets</a>
        </div>
    </div>
</footer>

<!-- This Javascript is for fetching and displaying sports data from an
 external source (sheet or file) -->

    <script>
const sheetId = "1kEFY3KHJW6b9SEkiEbOMtKyh0Z1NfHooQxaIyDLSZHI";
const apiKey = "AIzaSyDX3fxus40zemFk0vHsu8ByHCGlg4L1mC8"; //This allows the webpage to access the Sheets document
const range = "Autumn Kilbourne!A2:E14"; //These ranges correspond to the different seasons and sports
const range2 = "Winter Kilbourne!A2:E14";
const range3 = "Spring Kilbourne!A2:E9";
const hide = document.getElementById("hidden");

const b1 = document.getElementById("b1");
const b2 = document.getElementById("b2"); // Seasonal buttons
const b3 = document.getElementById("b3");
const buttons = [b1, b2, b3];

function setSelected(selectedBtn) {
  buttons.forEach(btn => btn.classList.remove("selected"));
  selectedBtn.classList.add("selected");
}

function switchSeason(fetchPromise) {
  const containers = document.querySelectorAll('.sport-container');
  
  // Start fading immediately
  containers.forEach(c => c.classList.add('fading'));
  
  // No delay, directly execute fetch
  fetchPromise
    .then(response => response.json())
    .then(data => {
      updateSports(data);
      containers.forEach(c => c.classList.remove('fading'));
    })
    .catch(error => {
      containers.forEach(c => c.classList.remove('fading'));
      console.error("Error fetching data:", error);
    });
}

b1.addEventListener("click", function() {         /*Some seasons have more sports than others this
 makes some of the content blocks disappear when you select a season with less sports */ 
  setSelected(b1);
  hide.style.display = "flex";
  switchSeason(fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`));
});

b2.addEventListener("click", function() {
  setSelected(b2);
  hide.style.display = "none";
  switchSeason(fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range2}?key=${apiKey}`));
});

b3.addEventListener("click", function() {
  setSelected(b3);
  hide.style.display = "none";
  switchSeason(fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range3}?key=${apiKey}`));
});

// On page load, set b1 as selected
setSelected(b1);

// Helper to show/hide sport divs
function updateSports(data) {
    for (let i = 1; i <= 13; i++) {
        const sportDiv = document.getElementById(`sport${i}`);
        const button = document.getElementById(`link${i}`);
        // Select the <p> that is a sibling of the .example div
        const p = sportDiv.parentElement.querySelector("p");
        let row = (data.values && data.values[i - 1]) || [];
        if (!Array.isArray(row)) row = [];
        const hasData = row.some(cell => typeof cell === "string" && cell.trim() !== "");
        if (hasData) {
            const [title, details, names, links, bgImage] = row; // bgImage is column E
            sportDiv.classList.remove("hidden");
            // Do NOT change the h2 element
            if (p) p.textContent = details || "";
            button.textContent = names || "Go to Page";
            button.onclick = () => { if (links) window.open(links); };
            // Set background image if provided
            if (bgImage && bgImage.trim() !== "") {
                sportDiv.style.backgroundImage = `url('${bgImage}')`;
                sportDiv.style.backgroundSize = "cover";
                sportDiv.style.backgroundPosition = "center";
            } else {
                sportDiv.style.backgroundImage = "";
            }
        } else {
            sportDiv.classList.add("hidden");
            // Do NOT change the h2 element
            if (p) p.textContent = "";
            button.textContent = "Go to Page";
            button.onclick = null;
            sportDiv.style.backgroundImage = "";
        }
    }
}

// Initial load (Autumn)

fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`)
    .then(response => response.json())
    .then(updateSports)
    .catch(error => console.error("Error fetching data:", error));

function auw() {
    hide.style.display = "flex";
    fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range}?key=${apiKey}`)
        .then(response => response.json())
        .then(updateSports)
        .catch(error => console.error("Error fetching data:", error));
}
function wiw() {
    hide.style.display = "none";
    fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range2}?key=${apiKey}`)
        .then(response => response.json())
        .then(updateSports)
        .catch(error => console.error("Error fetching data:", error));
}
function spw() {
    hide.style.display = "none";
    fetch(`https://sheets.googleapis.com/v4/spreadsheets/${sheetId}/values/${range3}?key=${apiKey}`)
        .then(response => response.json())
        .then(updateSports)
        .catch(error => console.error("Error fetching data:", error));
}
    window.addEventListener('scroll', function() {
        const progress = document.querySelector('.progress');
        const scrollTop = window.scrollY || document.documentElement.scrollTop;
        const docHeight = document.documentElement.scrollHeight - document.documentElement.clientHeight;
        const scrolled = (scrollTop / docHeight) * 100;
        progress.style.width = scrolled + "%";
});

    </script>
    
</body>
</html>
